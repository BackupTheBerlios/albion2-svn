# C++ Console Executable Makefile autogenerated by premake
# Don't edit this file! Instead edit `premake.lua` then rerun `make`

ifndef CONFIG
  CONFIG=Debug
endif

ifeq ($(CONFIG),Debug)
  BINDIR = ../..
  LIBDIR = ../..
  OBJDIR = obj/Debug
  OUTDIR = ../../albion2/server
  CPPFLAGS = -MD -I "../../a2e/src" -I "/usr/include" -I "/usr/include/freetype2" -I "/usr/include/FTGL" -I "/usr/include/ode" -I "/usr/include/opcode" -I "/usr/include/opcode/ICE"
  CFLAGS += $(CPPFLAGS) -g -Os -c `sdl-config --cflags`
  CXXFLAGS = $(CFLAGS)
  LDFLAGS += -L$(BINDIR) -L$(LIBDIR) -fPic `sdl-config --libs` -L "jpeglib" -L "zlib" -L "../lib" -L "/usr/lib" -L "/usr/lib" -L "/usr/lib" -lGL -lGLU -lz -ljpeg ../../a2e/lib/liba2e.a -lSDL_net -lSDL_image -lode -lfreetype -lftgl -llua -llualib -lxml2
  LDDEPS = ../../a2e/lib/liba2e.a
  TARGET = a2server
endif

ifeq ($(CONFIG),Release)
  BINDIR = ../..
  LIBDIR = ../..
  OBJDIR = obj/Release
  OUTDIR = ../../albion2/server
  CPPFLAGS = -MD -I "../../a2e/src" -I "/usr/include" -I "/usr/include/freetype2" -I "/usr/include/FTGL" -I "/usr/include/ode" -I "/usr/include/opcode" -I "/usr/include/opcode/ICE"
  CFLAGS += $(CPPFLAGS) -O2 -Os -c `sdl-config --cflags`
  CXXFLAGS = $(CFLAGS)
  LDFLAGS += -L$(BINDIR) -L$(LIBDIR) -s -fPic `sdl-config --libs` -L "jpeglib" -L "zlib" -L "../lib" -L "/usr/lib" -L "/usr/lib" -L "/usr/lib" -lGL -lGLU -lz -ljpeg ../../a2e/lib/liba2e.a -lSDL_net -lSDL_image -lode -lfreetype -lftgl -llua -llualib -lxml2
  LDDEPS = ../../a2e/lib/liba2e.a
  TARGET = a2server
endif

OBJECTS = \
	$(OBJDIR)/main.o \
	$(OBJDIR)/snet.o \

.PHONY: clean

$(OUTDIR)/$(TARGET): $(OBJECTS) $(LDDEPS)
	@echo Linking a2server
	-@if [ ! -d $(BINDIR) ]; then mkdir -p $(BINDIR); fi
	-@if [ ! -d $(LIBDIR) ]; then mkdir -p $(LIBDIR); fi
	-@if [ ! -d $(OUTDIR) ]; then mkdir -p $(OUTDIR); fi
	@$(CXX) -o $@ $(OBJECTS) $(LDFLAGS)

clean:
	@echo Cleaning a2server
	-@rm -rf $(OUTDIR)/$(TARGET) $(OBJDIR)

$(OBJDIR)/main.o: main.cpp
	-@if [ ! -d $(OBJDIR) ]; then mkdir -p $(OBJDIR); fi
	@echo $(notdir $<)
	@$(CXX) $(CXXFLAGS) -o $@ -c $<

$(OBJDIR)/snet.o: snet.cpp
	-@if [ ! -d $(OBJDIR) ]; then mkdir -p $(OBJDIR); fi
	@echo $(notdir $<)
	@$(CXX) $(CXXFLAGS) -o $@ -c $<

-include $(OBJECTS:%.o=%.d)

